首先需要先配置Py2App环境，注意，所有命令需要使用python2运行。

一开始尝试使用

```bash
sudo python3 -m pip install py2app
```

命令进行安装，结果报错，后来尝试

```bash
Sudo easy_install -U py2app
```

成功安装。

后来按照说明，运行以下命令来配置setup.py

```bash
py2applet —make-setup python_filename.py
```

随后默认setup.py的内容为：

```python
"""
This is a setup.py script generated by py2applet
Usage:
 python setup.py py2app
"""

from setuptools import setup

APP = ['WattCalc.py']
DATA_FILES = []
OPTIONS = {}

setup(
 app=APP,
 data_files=DATA_FILES,
 options={'py2app': OPTIONS},
 setup_requires=['py2app'],
)
```

更改内容为

```python
"""
This is a setup.py script generated by py2applet
Usage:
 python setup.py py2app
"""

from setuptools import setup

APP = ['WattCalc.py']
DATA_FILES = []
OPTIONS = {"argv_emulation": True, "iconfile": "iconfilename"}

setup(
 app=APP,
 data_files=DATA_FILES,
 options={'py2app': OPTIONS},
 setup_requires=['py2app'],
)
```


注意：iconfilename需要为.icns格式。

随后完成setup.py的配置。

之后进行app文件的生成，由于某种奇特的原因，需要先关闭SIP才能继续（系统完整性保护）。首先重启机器，同时在重启机器的时候按住command+R进入恢复模式，执行

```bash
csrutil disable
```

关闭SIP。重启进入系统后，执行

```bash
python setup.py py2app
```

即可生成。完成之后，最好再次进入恢复模式使用

```bash
csrutil enable
```

启动SIP。

目前仍然存在无法弹出提示框和深色模式适配不完全的问题，随后会继续解决。

